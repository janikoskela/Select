var Urhola={Selex:function(w){var y=undefined;var L=undefined;var h=undefined;var u=undefined;var R=undefined;var S=undefined;var i=undefined;var m=undefined;var F=undefined;var l=this;var aa={options:[],theme:undefined,targetElement:undefined,defaultOption:undefined,orientation:"right",onChange:undefined,optionLimit:5,sort:"desc",onFocus:undefined,onFocusOut:undefined,tabIndex:1};V();function V(){aa=Urhola.Utils.mergeSettings(w,aa);Urhola.Validations.validateOptionList(aa.options);Urhola.Validations.validateElement(aa.targetElement);y=O();L=z();h=K();u=N();i=M()}this.setOptions=function(af){Urhola.validateOptionList(af);aa.options=af;t(i);D()};this.setOptionLimit=function(af){l.closeOptionList();aa.optionLimit=af;l.openOptionList()};this.setOrientation=function(af){aa.orientation=af;l.render()};this.getOptions=function(){return U()};this.closeOptionList=function(){Urhola.Dom.addStyleToElement(i,"display","none");Urhola.Dom.addClassToElement(F,"arrow arrowDown")};this.openOptionList=function(){Urhola.Dom.addStyleToElement(i,"display","block");Urhola.Dom.addClassToElement(F,"arrow arrowUp");var af=i.firstChild.offsetHeight;o(af);Q()};this.isOptionListDisplayed=function(){return(Urhola.Dom.getElementStyleValue(i,"display")=="none")?false:true};this.getSelectedValue=function(){return R};this.getSelectedLabel=function(){return S};this.hide=function(){y.addStyleToElement("display","none");return this};this.show=function(){y.addStyleToElement("display","block");return this};this.render=function(){var af=ad();if(af.jquery!==undefined){af=af[0]}af.innerHTML="";Urhola.Dom.appendChildToElement(y,af);Urhola.Dom.appendChildToElement(L,y);var ag=ab();if(ag==="right"){Urhola.Dom.appendChildToElement(u,L);Urhola.Dom.appendChildToElement(h,L)}else{Urhola.Dom.appendChildToElement(h,L);Urhola.Dom.appendChildToElement(u,L)}Urhola.Dom.appendChildToElement(i,y);t(i);A();return this};function A(){var af=X();var ah;switch(typeof af){case"string":ah=G(af);break;case"object":var ag=(af.label===undefined)?af.name:af.label;var ai=af.value;ah=C(ai,ag);break}J(ah)}function g(af){var ah=Urhola.Dom.getElementAttribute(af,"value");var ag=Urhola.Dom.getElementAttribute(af,"label");return{value:ah,label:ag}}function J(af){S=Urhola.Dom.getElementAttribute(af,"label");R=Urhola.Dom.getElementAttribute(af,"value");m.innerHTML="";Urhola.Dom.appendTextToElement(S,m)}function D(){var af=G(R);J(af)}function t(ak){ak.innerHTML="";var ah=U();ah=p(ah);for(var ai=0;ai<ah.length;ai++){var aj=ah[ai];var ag,al;var af=Urhola.Dom.createElement("li");switch(typeof aj){case"string":al=aj;ag=aj;break;case"object":al=aj.value;ag=(aj.label===undefined)?((aj.name===undefined)?al:aj.name):aj.label;break;default:throw Error("Unsupported option data format!")}Urhola.Dom.addPropertyToElement(af,"label",ag);Urhola.Dom.addPropertyToElement(af,"value",al);Urhola.Dom.addPropertyToElement(af,"index",ai);Urhola.Dom.appendTextToElement(ag,af);af.addEventListener("click",Y);Urhola.Dom.appendChildToElement(af,ak)}return ak}function p(af){var ag=x();switch(ag){case"desc":af.sort(ae);break;case"asc":af.sort(q);break;default:throw Error('Unsupported sort type "'+ag+'"')}return af}function ae(ai,ah){var ag=ai.label;var af=ah.label;if(ag>af){return 1}if(ag<af){return -1}return 0}function q(ai,ah){var ag=ai.label;var af=ah.label;if(ag>af){return -1}if(ag<af){return 1}return 0}function Q(){Urhola.Dom.addStyleToElement(i,"width","100%")}function o(ah){var ag=c();var af=ag*ah;af+="px";Urhola.Dom.addStyleToElement(i,"height",af)}function G(aj){var ai=i.childNodes;for(var af=0;af<ai.length;af++){var ag=ai[af];var ah=Urhola.Dom.getElementAttribute(ag,"value");if(ah===aj){return ag}}return ai[0]}function C(al,ag){var ak=i.childNodes;for(var ah=0;ah<ak.length;ah++){var ai=ak[ah];var aj=Urhola.Dom.getElementAttribute(ai,"value");var af=ai.innerHTML;if(aj===al&&af===ag){return ai}}return ak[0]}function Y(ah){var ag=ah.target;var af=r();R=Urhola.Dom.getElementAttribute(ag,"value");S=Urhola.Dom.getElementAttribute(ag,"label");m.innerHTML=S;if(typeof af==="function"){af(S,R,l)}}function n(ag){var af=Urhola.Dom.createTextNode(ag);return af}function M(){var ag="optionsContainer";var af=Urhola.Dom.createElement("ul");Urhola.Dom.addClassToElement(af,ag);return af}function N(){var af="valueContainer";var ag=Urhola.Dom.createElement("li");m=Urhola.Dom.createElement("span");Urhola.Dom.appendChildToElement(m,ag);Urhola.Dom.addClassToElement(ag,af);return ag}function K(){var ag="selector";var af=Urhola.Dom.createElement("li");Urhola.Dom.addClassToElement(af,ag);F=Urhola.Dom.createElement("div");Urhola.Dom.addClassToElement(F,"arrow arrowDown");Urhola.Dom.appendChildToElement(F,af);return af}function Z(ag){var af=Urhola.Dom.getElementStyleValue(i,"display");if(af==="block"){l.closeOptionList()}else{l.openOptionList()}}function v(af){var ag=a();if(typeof ag==="function"){ag()}}function T(af){var ag=b();if(typeof ag==="function"){ag()}}function ac(ag){var af=ag.keyCode;switch(af){case 38:e(ag);break;case 40:k(ag);break;case 13:P(ag);break;default:f(String.fromCharCode(ag.which)[0])}}function W(af){Urhola.Dom.addPropertyToElement(af,"hovered",true)}function B(af){Urhola.Dom.addPropertyToElement(af,"hovered",false)}function f(al){al=al.toLowerCase();var aj=i.childNodes;var ai=d();for(var ah=0;ah<aj.length;ah++){var af=aj[ah];var ag=Urhola.Dom.getElementAttribute(af,"label");if(typeof ai==="object"){if(g(ai).label[0].toLowerCase()===al){var ak=ai.nextSibling;if(typeof ak==="object"&&ak!==null){if(g(ak).label[0].toLowerCase()===al){B(ai);W(ak);ak.scrollIntoView();return}}}}if(ag[0].toLowerCase()===al.toLowerCase()&&H(af)===false){if(ai!==undefined){B(ai)}W(af);af.scrollIntoView();return}}}function e(ai){if(!l.isOptionListDisplayed()){l.openOptionList()}var ag=d();var af=i.childNodes[i.childNodes.length-1];if(ag===undefined||ag===null){W(af)}else{B(ag);var ah=ag.previousSibling;if(ah===undefined||ah===null){ah=af}ah.scrollIntoView();W(ah)}}function k(ak){if(!l.isOptionListDisplayed()){l.openOptionList()}var ah=d();var aj=i.childNodes[0];if(ah===undefined||ah===null){W(aj)}else{B(ah);var ai=ah.nextSibling;if(ai===undefined||ai===null){ai=aj}var af=Urhola.Dom.getElementAttribute(ai,"index");var ag=c();if(af>=ag){I(ai,ag-1).scrollIntoView()}if(af==0){ai.scrollIntoView()}W(ai)}}function I(ah,ag){var ai=ah;for(var af=0;af<ag;af++){ai=ai.previousSibling}return ai}function d(){var ag=i.childNodes;for(var ah=0;ah<ag.length;ah++){var af=ag[ah];if(H(af)){return af}}}function H(af){return(af.getAttribute("hovered")=="true")?true:false}function P(ag){var ah=d();if(ah!==null&&typeof ah==="object"){var af=g(ah);J(af);l.closeOptionList()}}function O(){var ag=E();var af=j();var ah=Urhola.Dom.createElement("div");Urhola.Dom.addPropertyToElement(ah,"tabindex",af);ah.addEventListener("click",Z);ah.addEventListener("mouseleave",s);ah.addEventListener("focus",v,true);ah.addEventListener("blur",T,true);ah.addEventListener("keyup",ac);Urhola.Dom.addClassToElement(ah,ag);return ah}function s(af){l.closeOptionList()}function z(){var ag="container";var af=Urhola.Dom.createElement("ul");Urhola.Dom.addClassToElement(af,ag);return af}function ab(){return aa.orientation}function c(){return aa.optionLimit}function U(){return aa.options}function E(){return aa.theme}function ad(){return aa.targetElement}function X(){return aa.defaultOption}function r(){return aa.onChange}function x(){return aa.sort}function a(){return aa.onFocus}function b(){return aa.onFocusOut}function j(){return aa.tabIndex}},Dom:{getElementById:function(a){return document.getElementById(a)},createElement:function(b,e,d){var c=document.createElement(b);if(e!==undefined){c.id=e}if(Urhola.Utils.isArray(d)){for(var a=0;a<d.length;a++){c.className=d[a]}}else{if(typeof d==="string"){c.className=className}}return c},addIdToElement:function(a,b){a.id=b;return a},addClassToElement:function(b,a){b.className=a;return b},addStyleToElement:function(b,a,c){b.style[a]=c;return b},getElementStyleValue:function(b,a){return b.style[a]},getElementAttribute:function(b,a){return b.getAttribute(a)},addPropertyToElement:function(b,a,c){b.setAttribute(a,c);return b},appendChildToElement:function(b,a){a.appendChild(b);return parent},createTextNode:function(a){return document.createTextNode(a)},appendTextToElement:function(c,b){var a=Urhola.Dom.createTextNode(c);Urhola.Dom.appendChildToElement(a,b);return a}},Utils:{mergeSettings:function(d,c){for(var e in c){if(d[e]!==undefined){c[e]=d[e]}}return c},isArray:function(a){if(Array.isArray){return Array.isArray(a)}return false}},Validations:{validateOptionList:function(a){if(typeof a!=="object"){throw new Error("Invalid options format!")}},validateElement:function(a){if(typeof a!=="object"){throw new Error("Invalid element!")}}}};var Selex=function(a){return new Urhola.Selex(a)};