var Selex={Core:function(x){var z=undefined;var M=undefined;var i=undefined;var v=undefined;var S=undefined;var T=undefined;var j=undefined;var n=undefined;var F=undefined;var m=this;var aa={options:[],theme:undefined,parentElement:undefined,defaultValue:undefined,orientation:"right",onChange:undefined,optionLimit:5,sort:"desc",onFocus:undefined,onFocusOut:undefined,tabIndex:1};W();function W(){aa=Selex.Utils.mergeSettings(x,aa);Selex.Validations.validateOptionList(aa.options);Selex.Validations.validateElement(aa.parentElement);z=P();M=A();i=L();v=O();j=N()}this.setOptions=function(ae){Selex.validateOptionList(ae);aa.options=ae;u(j);D()};this.setOptionLimit=function(ae){m.closeOptionList();aa.optionLimit=ae;m.openOptionList()};this.setOrientation=function(ae){aa.orientation=ae;m.render()};this.getOptions=function(){return V()};this.closeOptionList=function(){Selex.Dom.addStyleToElement(j,"display","none");Selex.Dom.addClassToElement(F,"arrow arrowDown")};this.openOptionList=function(){Selex.Dom.addStyleToElement(j,"display","block");Selex.Dom.addClassToElement(F,"arrow arrowUp");var ae=j.firstChild.offsetHeight;p(ae);R()};this.isOptionListDisplayed=function(){return(Selex.Dom.getElementStyleValue(j,"display")=="none")?false:true};this.getSelectedValue=function(){return S};this.getSelectedLabel=function(){return T};this.hide=function(){z.addStyleToElement("display","none");return this};this.show=function(){z.addStyleToElement("display","block");return this};this.render=function(){var ae=G();ae.innerHTML="";Selex.Dom.appendChildToElement(z,ae);Selex.Dom.appendChildToElement(M,z);var af=ab();if(af==="right"){Selex.Dom.appendChildToElement(v,M);Selex.Dom.appendChildToElement(i,M)}else{Selex.Dom.appendChildToElement(i,M);Selex.Dom.appendChildToElement(v,M)}Selex.Dom.appendChildToElement(j,z);u(j);B();return this};function B(){var ae=c();var af=H(ae);K(af)}function h(ae){var ag=Selex.Dom.getElementAttribute(ae,"value");var af=Selex.Dom.getElementAttribute(ae,"label");return{value:ag,label:af}}function K(ae){T=Selex.Dom.getElementAttribute(ae,"label");S=Selex.Dom.getElementAttribute(ae,"value");n.innerHTML="";Selex.Dom.appendTextToElement(T,n)}function D(){var ae=H(S);K(ae)}function u(aj){aj.innerHTML="";var ag=V();ag=q(ag);for(var ah=0;ah<ag.length;ah++){var ai=ag[ah];var af,ak;var ae=Selex.Dom.createElement("li");switch(typeof ai){case"string":ak=ai;af=ai;break;case"object":ak=ai.value;af=(ai.label===undefined)?ak:ai.label;break;default:throw Error("Unsupported option data format!")}Selex.Dom.addPropertyToElement(ae,"label",af);Selex.Dom.addPropertyToElement(ae,"value",ak);Selex.Dom.addPropertyToElement(ae,"index",ah);Selex.Dom.appendTextToElement(af,ae);ae.addEventListener("click",Y);Selex.Dom.appendChildToElement(ae,aj)}return aj}function q(ae){var af=y();switch(af){case"desc":ae.sort(ad);break;case"asc":ae.sort(r);break;default:throw Error('Unsupported sort type "'+af+'"')}return ae}function ad(ah,ag){var af=ah.label;var ae=ag.label;if(af>ae){return 1}if(af<ae){return -1}return 0}function r(ah,ag){var af=ah.label;var ae=ag.label;if(af>ae){return -1}if(af<ae){return 1}return 0}function R(){Selex.Dom.addStyleToElement(j,"width","100%")}function p(ag){var af=d();var ae=af*ag;ae+="px";Selex.Dom.addStyleToElement(j,"height",ae)}function H(ah){var ag=j.childNodes;for(var ae=0;ae<ag.length;ae++){var af=ag[ae];if(af.value===ah){return af}}return ag[0]}function Y(ag){var af=ag.target;var ae=s();S=Selex.Dom.getElementAttribute(af,"value");T=Selex.Dom.getElementAttribute(af,"label");n.innerHTML=T;if(typeof ae==="function"){ae(T,S,m)}}function o(af){var ae=Selex.Dom.createTextNode(af);return ae}function N(){var af="optionsContainer";var ae=Selex.Dom.createElement("ul");Selex.Dom.addClassToElement(ae,af);return ae}function O(){var ae="valueContainer";var af=Selex.Dom.createElement("li");n=Selex.Dom.createElement("span");Selex.Dom.appendChildToElement(n,af);Selex.Dom.addClassToElement(af,ae);return af}function L(){var af="selector";var ae=Selex.Dom.createElement("li");Selex.Dom.addClassToElement(ae,af);F=Selex.Dom.createElement("div");Selex.Dom.addClassToElement(F,"arrow arrowDown");Selex.Dom.appendChildToElement(F,ae);return ae}function Z(af){var ae=Selex.Dom.getElementStyleValue(j,"display");if(ae==="block"){m.closeOptionList()}else{m.openOptionList()}}function w(ae){var af=a();if(typeof af==="function"){af()}}function U(ae){var af=b();if(typeof af==="function"){af()}}function ac(af){var ae=af.keyCode;switch(ae){case 38:f(af);break;case 40:l(af);break;case 13:Q(af);break;default:g(String.fromCharCode(af.which)[0])}}function X(ae){Selex.Dom.addPropertyToElement(ae,"hovered",true)}function C(ae){Selex.Dom.addPropertyToElement(ae,"hovered",false)}function g(ak){ak=ak.toLowerCase();var ai=j.childNodes;var ah=e();for(var ag=0;ag<ai.length;ag++){var ae=ai[ag];var af=Selex.Dom.getElementAttribute(ae,"label");if(typeof ah==="object"){if(h(ah).label[0].toLowerCase()===ak){var aj=ah.nextSibling;if(typeof aj==="object"&&aj!==null){if(h(aj).label[0].toLowerCase()===ak){C(ah);X(aj);aj.scrollIntoView();return}}}}if(af[0].toLowerCase()===ak.toLowerCase()&&I(ae)===false){if(ah!==undefined){C(ah)}X(ae);ae.scrollIntoView();return}}}function f(ah){if(!m.isOptionListDisplayed()){m.openOptionList()}var af=e();var ae=j.childNodes[j.childNodes.length-1];if(af===undefined||af===null){X(ae)}else{C(af);var ag=af.previousSibling;if(ag===undefined||ag===null){ag=ae}ag.scrollIntoView();X(ag)}}function l(aj){if(!m.isOptionListDisplayed()){m.openOptionList()}var ag=e();var ai=j.childNodes[0];if(ag===undefined||ag===null){X(ai)}else{C(ag);var ah=ag.nextSibling;if(ah===undefined||ah===null){ah=ai}var ae=Selex.Dom.getElementAttribute(ah,"index");var af=d();if(ae>=af){J(ah,af-1).scrollIntoView()}if(ae==0){ah.scrollIntoView()}X(ah)}}function J(ag,af){var ah=ag;for(var ae=0;ae<af;ae++){ah=ah.previousSibling}return ah}function e(){var af=j.childNodes;for(var ag=0;ag<af.length;ag++){var ae=af[ag];if(I(ae)){return ae}}}function I(ae){return(ae.getAttribute("hovered")=="true")?true:false}function Q(af){var ag=e();if(ag!==null&&typeof ag==="object"){var ae=h(ag);K(ae);m.closeOptionList()}}function P(){var af=E();var ae=k();var ag=Selex.Dom.createElement("div");Selex.Dom.addPropertyToElement(ag,"tabindex",ae);ag.addEventListener("click",Z);ag.addEventListener("mouseleave",t);ag.addEventListener("focus",w,true);ag.addEventListener("blur",U,true);ag.addEventListener("keyup",ac);Selex.Dom.addClassToElement(ag,af);return ag}function t(ae){m.closeOptionList()}function A(){var af="container";var ae=Selex.Dom.createElement("ul");Selex.Dom.addClassToElement(ae,af);return ae}function ab(){return aa.orientation}function d(){return aa.optionLimit}function V(){return aa.options}function E(){return aa.theme}function G(){return aa.parentElement}function c(){return aa.defaultValue}function s(){return aa.onChange}function y(){return aa.sort}function a(){return aa.onFocus}function b(){return aa.onFocusOut}function k(){return aa.tabIndex}},Dom:{getElementById:function(a){return document.getElementById(a)},createElement:function(b,e,d){var c=document.createElement(b);if(e!==undefined){c.id=e}if(Selex.Utils.isArray(d)){for(var a=0;a<d.length;a++){c.className=d[a]}}else{if(typeof d==="string"){c.className=className}}return c},addIdToElement:function(a,b){a.id=b;return a},addClassToElement:function(b,a){b.className=a;return b},addStyleToElement:function(b,a,c){b.style[a]=c;return b},getElementStyleValue:function(b,a){return b.style[a]},getElementAttribute:function(b,a){return b.getAttribute(a)},addPropertyToElement:function(b,a,c){b.setAttribute(a,c);return b},appendChildToElement:function(b,a){a.appendChild(b);return parent},createTextNode:function(a){return document.createTextNode(a)},appendTextToElement:function(c,b){var a=Selex.Dom.createTextNode(c);Selex.Dom.appendChildToElement(a,b);return a}},Utils:{mergeSettings:function(d,c){for(var e in c){if(d[e]!==undefined){c[e]=d[e]}}return c},isArray:function(a){if(Array.isArray){return Array.isArray(a)}return false}},Validations:{validateOptionList:function(a){if(typeof a!=="object"){throw new Error("Invalid options format!")}},validateElement:function(a){if(typeof a!=="object"){throw new Error("Parent element must be an element!")}}}};