var Urhola={SelectBox:function(x){var z=undefined;var L=undefined;var i=undefined;var v=undefined;var R=undefined;var S=undefined;var j=undefined;var n=undefined;var F=undefined;var m=this;var Z={options:[],theme:undefined,parentElement:undefined,defaultValue:undefined,orientation:"right",onChange:undefined,optionLimit:5,sort:"desc",onFocus:undefined,onFocusOut:undefined,tabIndex:1};V();function V(){Z=Urhola.Utils.mergeSettings(x,Z);Urhola.SelectBox.validateSettings(Z);z=O();L=A();i=K();v=N();j=M()}this.setOptions=function(ad){Urhola.SelectBox.validateOptionList(ad);Z.options=ad;u(j);D()};this.setOptionLimit=function(ad){m.closeOptionList();Z.optionLimit=ad;m.openOptionList()};this.setOrientation=function(ad){Z.orientation=ad;m.render()};this.getOptions=function(){return U()};this.closeOptionList=function(){Urhola.Dom.addStyleToElement(j,"display","none");Urhola.Dom.addClassToElement(F,"arrow arrowDown")};this.openOptionList=function(){Urhola.Dom.addStyleToElement(j,"display","block");Urhola.Dom.addClassToElement(F,"arrow arrowUp");var ad=j.firstChild.offsetHeight;p(ad);Q()};this.isOptionListDisplayed=function(){return(Urhola.Dom.getElementStyleValue(j,"display")=="none")?false:true};this.getSelectedValue=function(){return R};this.getSelectedLabel=function(){return S};this.hide=function(){z.addStyleToElement("display","none");return this};this.show=function(){z.addStyleToElement("display","block");return this};this.render=function(){var ad=G();ad.innerHTML="";Urhola.Dom.appendChildToElement(z,ad);Urhola.Dom.appendChildToElement(L,z);var ae=aa();if(ae==="right"){Urhola.Dom.appendChildToElement(v,L);Urhola.Dom.appendChildToElement(i,L)}else{Urhola.Dom.appendChildToElement(i,L);Urhola.Dom.appendChildToElement(v,L)}Urhola.Dom.appendChildToElement(j,z);u(j);return this};function B(){var ad=c();var ae=H(ad);J(ae)}function h(ad){var af=Urhola.Dom.getElementAttribute(ad,"value");var ae=Urhola.Dom.getElementAttribute(ad,"label");return{value:af,label:ae}}function J(ad){S=ad.label;R=ad.value;n.innerHTML="";Urhola.Dom.appendTextToElement(S,n)}function D(){var ad=H(R);J(ad)}function u(ah){ah.innerHTML="";var af=U();af=q(af);for(var ag=0;ag<af.length;ag++){var ae=af[ag].label;var ai=af[ag].value;var ad=Urhola.Dom.createElement("li");Urhola.Dom.addPropertyToElement(ad,"label",ae);Urhola.Dom.addPropertyToElement(ad,"value",ai);Urhola.Dom.appendTextToElement(ae,ad);ad.addEventListener("click",X);Urhola.Dom.appendChildToElement(ad,ah)}return ah}function q(ad){var ae=y();switch(ae){case"desc":ad.sort(ac);break;case"asc":ad.sort(r);break;default:throw Error('Unsupported sort type "'+ae+'"')}return ad}function ac(ag,af){var ae=ag.label;var ad=af.label;if(ae>ad){return 1}if(ae<ad){return -1}return 0}function r(ag,af){var ae=ag.label;var ad=af.label;if(ae>ad){return -1}if(ae<ad){return 1}return 0}function Q(){Urhola.Dom.addStyleToElement(j,"width","100%")}function p(af){var ae=d();var ad=ae*af;ad+="px";Urhola.Dom.addStyleToElement(j,"height",ad)}function H(af){var ad=U();for(var ae=0;ae<ad.length;ae++){if(ad[ae].value===af){return ad[ae]}}return ad[0]}function X(af){var ae=af.target;var ad=s();R=Urhola.Dom.getElementAttribute(ae,"value");S=Urhola.Dom.getElementAttribute(ae,"label");n.innerHTML=S;if(typeof ad==="function"){ad(S,R,m)}}function o(ae){var ad=Urhola.Dom.createTextNode(ae);return ad}function M(){var ae="optionsContainer";var ad=Urhola.Dom.createElement("ul");Urhola.Dom.addClassToElement(ad,ae);return ad}function N(){var ad="valueContainer";var ae=Urhola.Dom.createElement("li");n=Urhola.Dom.createElement("span");Urhola.Dom.appendChildToElement(n,ae);Urhola.Dom.addClassToElement(ae,ad);B();return ae}function K(){var ae="selector";var ad=Urhola.Dom.createElement("li");Urhola.Dom.addClassToElement(ad,ae);F=Urhola.Dom.createElement("div");Urhola.Dom.addClassToElement(F,"arrow arrowDown");Urhola.Dom.appendChildToElement(F,ad);return ad}function Y(ae){var ad=Urhola.Dom.getElementStyleValue(j,"display");if(ad==="block"){m.closeOptionList()}else{m.openOptionList()}}function w(ad){var ae=a();if(typeof ae==="function"){ae()}}function T(ad){var ae=b();if(typeof ae==="function"){ae()}}function ab(ae){var ad=ae.keyCode;switch(ad){case 38:f(ae);break;case 40:l(ae);break;case 13:P(ae);break;default:g(String.fromCharCode(ae.which)[0])}}function W(ad){Urhola.Dom.addPropertyToElement(ad,"hovered",true)}function C(ad){Urhola.Dom.addPropertyToElement(ad,"hovered",false)}function g(aj){aj=aj.toLowerCase();var ah=j.childNodes;var ag=e();for(var af=0;af<ah.length;af++){var ad=ah[af];var ae=Urhola.Dom.getElementAttribute(ad,"label");if(typeof ag==="object"){if(h(ag).label[0].toLowerCase()===aj){var ai=ag.nextSibling;if(typeof ai==="object"&&ai!==null){if(h(ai).label[0].toLowerCase()===aj){C(ag);W(ai);ai.scrollIntoView();return}}}}if(ae[0].toLowerCase()===aj.toLowerCase()&&I(ad)===false){if(ag!==undefined){C(ag)}W(ad);ad.scrollIntoView();return}}}function f(ag){if(!m.isOptionListDisplayed()){m.openOptionList()}var ae=e();var ad=j.childNodes[j.childNodes.length-1];if(ae===undefined||ae===null){W(ad)}else{C(ae);var af=ae.previousSibling;if(af===undefined||af===null){af=ad}af.scrollIntoView();W(af)}}function l(ag){if(!m.isOptionListDisplayed()){m.openOptionList()}var ad=e();var af=j.childNodes[0];if(ad===undefined||ad===null){W(af)}else{C(ad);var ae=ad.nextSibling;if(ae===undefined||ae===null){ae=af}ae.scrollIntoView();W(ae)}}function e(){var ae=j.childNodes;for(var af=0;af<ae.length;af++){var ad=ae[af];if(I(ad)){return ad}}}function I(ad){return(ad.getAttribute("hovered")=="true")?true:false}function P(ae){var af=e();if(af!==null||af!==undefined){var ad=h(af);J(ad);m.closeOptionList()}}function O(){var ae=E();var ad=k();var af=Urhola.Dom.createElement("div");Urhola.Dom.addPropertyToElement(af,"tabindex",ad);af.addEventListener("click",Y);af.addEventListener("mouseleave",t);af.addEventListener("focus",w,true);af.addEventListener("blur",T,true);af.addEventListener("keyup",ab);Urhola.Dom.addClassToElement(af,ae);return af}function t(ad){m.closeOptionList()}function A(){var ae="container";var ad=Urhola.Dom.createElement("ul");Urhola.Dom.addClassToElement(ad,ae);return ad}function aa(){return Z.orientation}function d(){return Z.optionLimit}function U(){return Z.options}function E(){return Z.theme}function G(){return Z.parentElement}function c(){return Z.defaultValue}function s(){return Z.onChange}function y(){return Z.sort}function a(){return Z.onFocus}function b(){return Z.onFocusOut}function k(){return Z.tabIndex}},Dom:{getElementById:function(a){return document.getElementById(a)},createElement:function(b,e,d){var c=document.createElement(b);if(e!==undefined){c.id=e}if(Urhola.Utils.isArray(d)){for(var a=0;a<d.length;a++){c.className=d[a]}}else{if(typeof d==="string"){c.className=className}}return c},addIdToElement:function(a,b){a.id=b;return a},addClassToElement:function(b,a){b.className=a;return b},addStyleToElement:function(b,a,c){b.style[a]=c;return b},getElementStyleValue:function(b,a){return b.style[a]},getElementAttribute:function(b,a){return b.getAttribute(a)},addPropertyToElement:function(b,a,c){b.setAttribute(a,c);return b},appendChildToElement:function(b,a){a.appendChild(b);return parent},createTextNode:function(a){return document.createTextNode(a)},appendTextToElement:function(c,b){var a=Urhola.Dom.createTextNode(c);Urhola.Dom.appendChildToElement(a,b);return a}},Utils:{mergeSettings:function(d,c){for(var e in c){if(d[e]!==undefined){c[e]=d[e]}}return c},isArray:function(a){if(Array.isArray){return Array.isArray(a)}return false}}};Urhola.SelectBox.validateOptionList=function(a){if(Object.prototype.toString.call(a)!=="[object Array]"){throw new Error("Options must be an object array! Each array object must contain label and value attributes!")}};Urhola.SelectBox.validateElement=function(a){if(typeof a!=="object"){throw new Error("Parent element must be an element!")}};Urhola.SelectBox.validateSettings=function(a){Urhola.SelectBox.validateOptionList(a.options);Urhola.SelectBox.validateElement(a.parentElement)};